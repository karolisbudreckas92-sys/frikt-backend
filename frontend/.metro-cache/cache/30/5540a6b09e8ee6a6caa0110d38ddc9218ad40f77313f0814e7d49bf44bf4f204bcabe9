{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.api.setToken(storedToken);\n\n          // Verify token is still valid\n          try {\n            const response = await _servicesApi.api.getMe();\n            setUser(response);\n            await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n          } catch (error) {\n            // Token invalid, clear auth\n            await logout();\n          }\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _servicesApi.api.login(email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (name, email, password) => {\n      const response = await _servicesApi.api.register(name, email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n      _servicesApi.api.setToken(null);\n      setToken(null);\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        try {\n          const response = await _servicesApi.api.getMe();\n          setUser(response);\n          await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n        } catch (error) {\n          console.error('Error refreshing user:', error);\n        }\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":130,"map":[[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"AuthProvider"],[15,22,27,0],[15,25,27,0,"AuthProvider"],[15,37,27,0],[16,2,114,0,"exports"],[16,9,114,0],[16,10,114,0,"useAuth"],[16,17,114,0],[16,20,114,0,"useAuth"],[16,27,114,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,25,0],[22,8,25,6,"AuthContext"],[22,19,25,17],[22,35,25,20],[22,39,25,20,"createContext"],[22,45,25,33],[22,46,25,33,"createContext"],[22,59,25,33],[22,61,25,63,"undefined"],[22,70,25,72],[22,71,25,73],[23,2,27,7],[23,11,27,16,"AuthProvider"],[23,23,27,28,"AuthProvider"],[23,24,27,29],[24,4,27,31,"children"],[25,2,27,65],[25,3,27,66],[25,5,27,68],[26,4,27,68,"_s"],[26,6,27,68],[27,4,28,2],[27,10,28,8],[27,11,28,9,"user"],[27,15,28,13],[27,17,28,15,"setUser"],[27,24,28,22],[27,25,28,23],[27,28,28,26],[27,32,28,26,"useState"],[27,38,28,34],[27,39,28,34,"useState"],[27,47,28,34],[27,49,28,48],[27,53,28,52],[27,54,28,53],[28,4,29,2],[28,10,29,8],[28,11,29,9,"token"],[28,16,29,14],[28,18,29,16,"setToken"],[28,26,29,24],[28,27,29,25],[28,30,29,28],[28,34,29,28,"useState"],[28,40,29,36],[28,41,29,36,"useState"],[28,49,29,36],[28,51,29,52],[28,55,29,56],[28,56,29,57],[29,4,30,2],[29,10,30,8],[29,11,30,9,"isLoading"],[29,20,30,18],[29,22,30,20,"setIsLoading"],[29,34,30,32],[29,35,30,33],[29,38,30,36],[29,42,30,36,"useState"],[29,48,30,44],[29,49,30,44,"useState"],[29,57,30,44],[29,59,30,45],[29,63,30,49],[29,64,30,50],[30,4,32,2],[30,8,32,2,"useEffect"],[30,14,32,11],[30,15,32,11,"useEffect"],[30,24,32,11],[30,26,32,12],[30,32,32,18],[31,6,33,4,"loadStoredAuth"],[31,20,33,18],[31,21,33,19],[31,22,33,20],[32,4,34,2],[32,5,34,3],[32,7,34,5],[32,9,34,7],[32,10,34,8],[33,4,36,2],[33,10,36,8,"loadStoredAuth"],[33,24,36,22],[33,27,36,25],[33,33,36,25,"loadStoredAuth"],[33,34,36,25],[33,39,36,37],[34,6,37,4],[34,10,37,8],[35,8,38,6],[35,14,38,12,"storedToken"],[35,25,38,23],[35,28,38,26],[35,34,38,32,"AsyncStorage"],[35,46,38,44],[35,47,38,44,"default"],[35,54,38,44],[35,55,38,45,"getItem"],[35,62,38,52],[35,63,38,53],[35,75,38,65],[35,76,38,66],[36,8,39,6],[36,14,39,12,"storedUser"],[36,24,39,22],[36,27,39,25],[36,33,39,31,"AsyncStorage"],[36,45,39,43],[36,46,39,43,"default"],[36,53,39,43],[36,54,39,44,"getItem"],[36,61,39,51],[36,62,39,52],[36,73,39,63],[36,74,39,64],[37,8,41,6],[37,12,41,10,"storedToken"],[37,23,41,21],[37,27,41,25,"storedUser"],[37,37,41,35],[37,39,41,37],[38,10,42,8,"setToken"],[38,18,42,16],[38,19,42,17,"storedToken"],[38,30,42,28],[38,31,42,29],[39,10,43,8,"setUser"],[39,17,43,15],[39,18,43,16,"JSON"],[39,22,43,20],[39,23,43,21,"parse"],[39,28,43,26],[39,29,43,27,"storedUser"],[39,39,43,37],[39,40,43,38],[39,41,43,39],[40,10,44,8,"api"],[40,22,44,11],[40,23,44,11,"api"],[40,26,44,11],[40,27,44,12,"setToken"],[40,35,44,20],[40,36,44,21,"storedToken"],[40,47,44,32],[40,48,44,33],[42,10,46,8],[43,10,47,8],[43,14,47,12],[44,12,48,10],[44,18,48,16,"response"],[44,26,48,24],[44,29,48,27],[44,35,48,33,"api"],[44,47,48,36],[44,48,48,36,"api"],[44,51,48,36],[44,52,48,37,"getMe"],[44,57,48,42],[44,58,48,43],[44,59,48,44],[45,12,49,10,"setUser"],[45,19,49,17],[45,20,49,18,"response"],[45,28,49,26],[45,29,49,27],[46,12,50,10],[46,18,50,16,"AsyncStorage"],[46,30,50,28],[46,31,50,28,"default"],[46,38,50,28],[46,39,50,29,"setItem"],[46,46,50,36],[46,47,50,37],[46,58,50,48],[46,60,50,50,"JSON"],[46,64,50,54],[46,65,50,55,"stringify"],[46,74,50,64],[46,75,50,65,"response"],[46,83,50,73],[46,84,50,74],[46,85,50,75],[47,10,51,8],[47,11,51,9],[47,12,51,10],[47,19,51,17,"error"],[47,24,51,22],[47,26,51,24],[48,12,52,10],[49,12,53,10],[49,18,53,16,"logout"],[49,24,53,22],[49,25,53,23],[49,26,53,24],[50,10,54,8],[51,8,55,6],[52,6,56,4],[52,7,56,5],[52,8,56,6],[52,15,56,13,"error"],[52,20,56,18],[52,22,56,20],[53,8,57,6,"console"],[53,15,57,13],[53,16,57,14,"error"],[53,21,57,19],[53,22,57,20],[53,43,57,41],[53,45,57,43,"error"],[53,50,57,48],[53,51,57,49],[54,6,58,4],[54,7,58,5],[54,16,58,14],[55,8,59,6,"setIsLoading"],[55,20,59,18],[55,21,59,19],[55,26,59,24],[55,27,59,25],[56,6,60,4],[57,4,61,2],[57,5,61,3],[58,4,63,2],[58,10,63,8,"login"],[58,15,63,13],[58,18,63,16],[58,24,63,16,"login"],[58,25,63,23,"email"],[58,30,63,36],[58,32,63,38,"password"],[58,40,63,54],[58,45,63,59],[59,6,64,4],[59,12,64,10,"response"],[59,20,64,18],[59,23,64,21],[59,29,64,27,"api"],[59,41,64,30],[59,42,64,30,"api"],[59,45,64,30],[59,46,64,31,"login"],[59,51,64,36],[59,52,64,37,"email"],[59,57,64,42],[59,59,64,44,"password"],[59,67,64,52],[59,68,64,53],[60,6,65,4],[60,12,65,10],[61,8,65,12,"access_token"],[61,20,65,24],[62,8,65,26,"user"],[62,12,65,30],[62,14,65,32,"userData"],[63,6,65,41],[63,7,65,42],[63,10,65,45,"response"],[63,18,65,53],[64,6,67,4],[64,12,67,10,"AsyncStorage"],[64,24,67,22],[64,25,67,22,"default"],[64,32,67,22],[64,33,67,23,"setItem"],[64,40,67,30],[64,41,67,31],[64,53,67,43],[64,55,67,45,"access_token"],[64,67,67,57],[64,68,67,58],[65,6,68,4],[65,12,68,10,"AsyncStorage"],[65,24,68,22],[65,25,68,22,"default"],[65,32,68,22],[65,33,68,23,"setItem"],[65,40,68,30],[65,41,68,31],[65,52,68,42],[65,54,68,44,"JSON"],[65,58,68,48],[65,59,68,49,"stringify"],[65,68,68,58],[65,69,68,59,"userData"],[65,77,68,67],[65,78,68,68],[65,79,68,69],[66,6,70,4,"api"],[66,18,70,7],[66,19,70,7,"api"],[66,22,70,7],[66,23,70,8,"setToken"],[66,31,70,16],[66,32,70,17,"access_token"],[66,44,70,29],[66,45,70,30],[67,6,71,4,"setToken"],[67,14,71,12],[67,15,71,13,"access_token"],[67,27,71,25],[67,28,71,26],[68,6,72,4,"setUser"],[68,13,72,11],[68,14,72,12,"userData"],[68,22,72,20],[68,23,72,21],[69,4,73,2],[69,5,73,3],[70,4,75,2],[70,10,75,8,"register"],[70,18,75,16],[70,21,75,19],[70,27,75,19,"register"],[70,28,75,26,"name"],[70,32,75,38],[70,34,75,40,"email"],[70,39,75,53],[70,41,75,55,"password"],[70,49,75,71],[70,54,75,76],[71,6,76,4],[71,12,76,10,"response"],[71,20,76,18],[71,23,76,21],[71,29,76,27,"api"],[71,41,76,30],[71,42,76,30,"api"],[71,45,76,30],[71,46,76,31,"register"],[71,54,76,39],[71,55,76,40,"name"],[71,59,76,44],[71,61,76,46,"email"],[71,66,76,51],[71,68,76,53,"password"],[71,76,76,61],[71,77,76,62],[72,6,77,4],[72,12,77,10],[73,8,77,12,"access_token"],[73,20,77,24],[74,8,77,26,"user"],[74,12,77,30],[74,14,77,32,"userData"],[75,6,77,41],[75,7,77,42],[75,10,77,45,"response"],[75,18,77,53],[76,6,79,4],[76,12,79,10,"AsyncStorage"],[76,24,79,22],[76,25,79,22,"default"],[76,32,79,22],[76,33,79,23,"setItem"],[76,40,79,30],[76,41,79,31],[76,53,79,43],[76,55,79,45,"access_token"],[76,67,79,57],[76,68,79,58],[77,6,80,4],[77,12,80,10,"AsyncStorage"],[77,24,80,22],[77,25,80,22,"default"],[77,32,80,22],[77,33,80,23,"setItem"],[77,40,80,30],[77,41,80,31],[77,52,80,42],[77,54,80,44,"JSON"],[77,58,80,48],[77,59,80,49,"stringify"],[77,68,80,58],[77,69,80,59,"userData"],[77,77,80,67],[77,78,80,68],[77,79,80,69],[78,6,82,4,"api"],[78,18,82,7],[78,19,82,7,"api"],[78,22,82,7],[78,23,82,8,"setToken"],[78,31,82,16],[78,32,82,17,"access_token"],[78,44,82,29],[78,45,82,30],[79,6,83,4,"setToken"],[79,14,83,12],[79,15,83,13,"access_token"],[79,27,83,25],[79,28,83,26],[80,6,84,4,"setUser"],[80,13,84,11],[80,14,84,12,"userData"],[80,22,84,20],[80,23,84,21],[81,4,85,2],[81,5,85,3],[82,4,87,2],[82,10,87,8,"logout"],[82,16,87,14],[82,19,87,17],[82,25,87,17,"logout"],[82,26,87,17],[82,31,87,29],[83,6,88,4],[83,12,88,10,"AsyncStorage"],[83,24,88,22],[83,25,88,22,"default"],[83,32,88,22],[83,33,88,23,"removeItem"],[83,43,88,33],[83,44,88,34],[83,56,88,46],[83,57,88,47],[84,6,89,4],[84,12,89,10,"AsyncStorage"],[84,24,89,22],[84,25,89,22,"default"],[84,32,89,22],[84,33,89,23,"removeItem"],[84,43,89,33],[84,44,89,34],[84,55,89,45],[84,56,89,46],[85,6,90,4,"api"],[85,18,90,7],[85,19,90,7,"api"],[85,22,90,7],[85,23,90,8,"setToken"],[85,31,90,16],[85,32,90,17],[85,36,90,21],[85,37,90,22],[86,6,91,4,"setToken"],[86,14,91,12],[86,15,91,13],[86,19,91,17],[86,20,91,18],[87,6,92,4,"setUser"],[87,13,92,11],[87,14,92,12],[87,18,92,16],[87,19,92,17],[88,4,93,2],[88,5,93,3],[89,4,95,2],[89,10,95,8,"refreshUser"],[89,21,95,19],[89,24,95,22],[89,30,95,22,"refreshUser"],[89,31,95,22],[89,36,95,34],[90,6,96,4],[90,10,96,8,"token"],[90,15,96,13],[90,17,96,15],[91,8,97,6],[91,12,97,10],[92,10,98,8],[92,16,98,14,"response"],[92,24,98,22],[92,27,98,25],[92,33,98,31,"api"],[92,45,98,34],[92,46,98,34,"api"],[92,49,98,34],[92,50,98,35,"getMe"],[92,55,98,40],[92,56,98,41],[92,57,98,42],[93,10,99,8,"setUser"],[93,17,99,15],[93,18,99,16,"response"],[93,26,99,24],[93,27,99,25],[94,10,100,8],[94,16,100,14,"AsyncStorage"],[94,28,100,26],[94,29,100,26,"default"],[94,36,100,26],[94,37,100,27,"setItem"],[94,44,100,34],[94,45,100,35],[94,56,100,46],[94,58,100,48,"JSON"],[94,62,100,52],[94,63,100,53,"stringify"],[94,72,100,62],[94,73,100,63,"response"],[94,81,100,71],[94,82,100,72],[94,83,100,73],[95,8,101,6],[95,9,101,7],[95,10,101,8],[95,17,101,15,"error"],[95,22,101,20],[95,24,101,22],[96,10,102,8,"console"],[96,17,102,15],[96,18,102,16,"error"],[96,23,102,21],[96,24,102,22],[96,48,102,46],[96,50,102,48,"error"],[96,55,102,53],[96,56,102,54],[97,8,103,6],[98,6,104,4],[99,4,105,2],[99,5,105,3],[100,4,107,2],[100,24,108,4],[100,28,108,4,"_reactJsxDevRuntime"],[100,47,108,4],[100,48,108,4,"jsxDEV"],[100,54,108,4],[100,56,108,5,"AuthContext"],[100,67,108,16],[100,68,108,17,"Provider"],[100,76,108,25],[101,6,108,26,"value"],[101,11,108,31],[101,13,108,33],[102,8,108,35,"user"],[102,12,108,39],[103,8,108,41,"token"],[103,13,108,46],[104,8,108,48,"isLoading"],[104,17,108,57],[105,8,108,59,"login"],[105,13,108,64],[106,8,108,66,"register"],[106,16,108,74],[107,8,108,76,"logout"],[107,14,108,82],[108,8,108,84,"refreshUser"],[109,6,108,96],[109,7,108,98],[110,6,108,98,"children"],[110,14,108,98],[110,16,109,7,"children"],[111,4,109,15],[112,6,109,15,"fileName"],[112,14,109,15],[112,16,109,15,"_jsxFileName"],[112,28,109,15],[113,6,109,15,"lineNumber"],[113,16,109,15],[114,6,109,15,"columnNumber"],[114,18,109,15],[115,4,109,15],[115,11,110,26],[115,12,110,27],[116,2,112,0],[117,2,112,1,"_s"],[117,4,112,1],[117,5,27,16,"AuthProvider"],[117,17,27,28],[118,2,27,28,"_c"],[118,4,27,28],[118,7,27,16,"AuthProvider"],[118,19,27,28],[119,2,114,7],[119,11,114,16,"useAuth"],[119,18,114,23,"useAuth"],[119,19,114,23],[119,21,114,26],[120,4,114,26,"_s2"],[120,7,114,26],[121,4,115,2],[121,10,115,8,"context"],[121,17,115,15],[121,20,115,18],[121,24,115,18,"useContext"],[121,30,115,28],[121,31,115,28,"useContext"],[121,41,115,28],[121,43,115,29,"AuthContext"],[121,54,115,40],[121,55,115,41],[122,4,116,2],[122,8,116,6,"context"],[122,15,116,13],[122,20,116,18,"undefined"],[122,29,116,27],[122,31,116,29],[123,6,117,4],[123,12,117,10],[123,16,117,14,"Error"],[123,21,117,19],[123,22,117,20],[123,67,117,65],[123,68,117,66],[124,4,118,2],[125,4,119,2],[125,11,119,9,"context"],[125,18,119,16],[126,2,120,0],[127,2,120,1,"_s2"],[127,5,120,1],[127,6,114,16,"useAuth"],[127,13,114,23],[128,2,114,23],[128,6,114,23,"_c"],[128,8,114,23],[129,2,114,23,"$RefreshReg$"],[129,14,114,23],[129,15,114,23,"_c"],[129,17,114,23],[130,0,114,23],[130,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFyB;gBGE;GHU;mBIE;GJU;iBKE;GLM;sBME;GNU;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}