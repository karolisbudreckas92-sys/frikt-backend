{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const isAdmin = user?.role === 'admin';\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.api.setToken(storedToken);\n\n          // Verify token is still valid\n          try {\n            const response = await _servicesApi.api.getMe();\n            setUser(response);\n            await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n          } catch (error) {\n            // Token invalid, clear auth\n            await logout();\n          }\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _servicesApi.api.login(email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (name, email, password) => {\n      const response = await _servicesApi.api.register(name, email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n      _servicesApi.api.setToken(null);\n      setToken(null);\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        try {\n          const response = await _servicesApi.api.getMe();\n          setUser(response);\n          await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n        } catch (error) {\n          console.error('Error refreshing user:', error);\n        }\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        isAdmin,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":132,"map":[[15,2,35,0,"exports"],[15,9,35,0],[15,10,35,0,"AuthProvider"],[15,22,35,0],[15,25,35,0,"AuthProvider"],[15,37,35,0],[16,2,124,0,"exports"],[16,9,124,0],[16,10,124,0,"useAuth"],[16,17,124,0],[16,20,124,0,"useAuth"],[16,27,124,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,33,0],[22,8,33,6,"AuthContext"],[22,19,33,17],[22,35,33,20],[22,39,33,20,"createContext"],[22,45,33,33],[22,46,33,33,"createContext"],[22,59,33,33],[22,61,33,63,"undefined"],[22,70,33,72],[22,71,33,73],[23,2,35,7],[23,11,35,16,"AuthProvider"],[23,23,35,28,"AuthProvider"],[23,24,35,29],[24,4,35,31,"children"],[25,2,35,65],[25,3,35,66],[25,5,35,68],[26,4,35,68,"_s"],[26,6,35,68],[27,4,36,2],[27,10,36,8],[27,11,36,9,"user"],[27,15,36,13],[27,17,36,15,"setUser"],[27,24,36,22],[27,25,36,23],[27,28,36,26],[27,32,36,26,"useState"],[27,38,36,34],[27,39,36,34,"useState"],[27,47,36,34],[27,49,36,48],[27,53,36,52],[27,54,36,53],[28,4,37,2],[28,10,37,8],[28,11,37,9,"token"],[28,16,37,14],[28,18,37,16,"setToken"],[28,26,37,24],[28,27,37,25],[28,30,37,28],[28,34,37,28,"useState"],[28,40,37,36],[28,41,37,36,"useState"],[28,49,37,36],[28,51,37,52],[28,55,37,56],[28,56,37,57],[29,4,38,2],[29,10,38,8],[29,11,38,9,"isLoading"],[29,20,38,18],[29,22,38,20,"setIsLoading"],[29,34,38,32],[29,35,38,33],[29,38,38,36],[29,42,38,36,"useState"],[29,48,38,44],[29,49,38,44,"useState"],[29,57,38,44],[29,59,38,45],[29,63,38,49],[29,64,38,50],[30,4,40,2],[30,10,40,8,"isAdmin"],[30,17,40,15],[30,20,40,18,"user"],[30,24,40,22],[30,26,40,24,"role"],[30,30,40,28],[30,35,40,33],[30,42,40,40],[31,4,42,2],[31,8,42,2,"useEffect"],[31,14,42,11],[31,15,42,11,"useEffect"],[31,24,42,11],[31,26,42,12],[31,32,42,18],[32,6,43,4,"loadStoredAuth"],[32,20,43,18],[32,21,43,19],[32,22,43,20],[33,4,44,2],[33,5,44,3],[33,7,44,5],[33,9,44,7],[33,10,44,8],[34,4,46,2],[34,10,46,8,"loadStoredAuth"],[34,24,46,22],[34,27,46,25],[34,33,46,25,"loadStoredAuth"],[34,34,46,25],[34,39,46,37],[35,6,47,4],[35,10,47,8],[36,8,48,6],[36,14,48,12,"storedToken"],[36,25,48,23],[36,28,48,26],[36,34,48,32,"AsyncStorage"],[36,46,48,44],[36,47,48,44,"default"],[36,54,48,44],[36,55,48,45,"getItem"],[36,62,48,52],[36,63,48,53],[36,75,48,65],[36,76,48,66],[37,8,49,6],[37,14,49,12,"storedUser"],[37,24,49,22],[37,27,49,25],[37,33,49,31,"AsyncStorage"],[37,45,49,43],[37,46,49,43,"default"],[37,53,49,43],[37,54,49,44,"getItem"],[37,61,49,51],[37,62,49,52],[37,73,49,63],[37,74,49,64],[38,8,51,6],[38,12,51,10,"storedToken"],[38,23,51,21],[38,27,51,25,"storedUser"],[38,37,51,35],[38,39,51,37],[39,10,52,8,"setToken"],[39,18,52,16],[39,19,52,17,"storedToken"],[39,30,52,28],[39,31,52,29],[40,10,53,8,"setUser"],[40,17,53,15],[40,18,53,16,"JSON"],[40,22,53,20],[40,23,53,21,"parse"],[40,28,53,26],[40,29,53,27,"storedUser"],[40,39,53,37],[40,40,53,38],[40,41,53,39],[41,10,54,8,"api"],[41,22,54,11],[41,23,54,11,"api"],[41,26,54,11],[41,27,54,12,"setToken"],[41,35,54,20],[41,36,54,21,"storedToken"],[41,47,54,32],[41,48,54,33],[43,10,56,8],[44,10,57,8],[44,14,57,12],[45,12,58,10],[45,18,58,16,"response"],[45,26,58,24],[45,29,58,27],[45,35,58,33,"api"],[45,47,58,36],[45,48,58,36,"api"],[45,51,58,36],[45,52,58,37,"getMe"],[45,57,58,42],[45,58,58,43],[45,59,58,44],[46,12,59,10,"setUser"],[46,19,59,17],[46,20,59,18,"response"],[46,28,59,26],[46,29,59,27],[47,12,60,10],[47,18,60,16,"AsyncStorage"],[47,30,60,28],[47,31,60,28,"default"],[47,38,60,28],[47,39,60,29,"setItem"],[47,46,60,36],[47,47,60,37],[47,58,60,48],[47,60,60,50,"JSON"],[47,64,60,54],[47,65,60,55,"stringify"],[47,74,60,64],[47,75,60,65,"response"],[47,83,60,73],[47,84,60,74],[47,85,60,75],[48,10,61,8],[48,11,61,9],[48,12,61,10],[48,19,61,17,"error"],[48,24,61,22],[48,26,61,24],[49,12,62,10],[50,12,63,10],[50,18,63,16,"logout"],[50,24,63,22],[50,25,63,23],[50,26,63,24],[51,10,64,8],[52,8,65,6],[53,6,66,4],[53,7,66,5],[53,8,66,6],[53,15,66,13,"error"],[53,20,66,18],[53,22,66,20],[54,8,67,6,"console"],[54,15,67,13],[54,16,67,14,"error"],[54,21,67,19],[54,22,67,20],[54,43,67,41],[54,45,67,43,"error"],[54,50,67,48],[54,51,67,49],[55,6,68,4],[55,7,68,5],[55,16,68,14],[56,8,69,6,"setIsLoading"],[56,20,69,18],[56,21,69,19],[56,26,69,24],[56,27,69,25],[57,6,70,4],[58,4,71,2],[58,5,71,3],[59,4,73,2],[59,10,73,8,"login"],[59,15,73,13],[59,18,73,16],[59,24,73,16,"login"],[59,25,73,23,"email"],[59,30,73,36],[59,32,73,38,"password"],[59,40,73,54],[59,45,73,59],[60,6,74,4],[60,12,74,10,"response"],[60,20,74,18],[60,23,74,21],[60,29,74,27,"api"],[60,41,74,30],[60,42,74,30,"api"],[60,45,74,30],[60,46,74,31,"login"],[60,51,74,36],[60,52,74,37,"email"],[60,57,74,42],[60,59,74,44,"password"],[60,67,74,52],[60,68,74,53],[61,6,75,4],[61,12,75,10],[62,8,75,12,"access_token"],[62,20,75,24],[63,8,75,26,"user"],[63,12,75,30],[63,14,75,32,"userData"],[64,6,75,41],[64,7,75,42],[64,10,75,45,"response"],[64,18,75,53],[65,6,77,4],[65,12,77,10,"AsyncStorage"],[65,24,77,22],[65,25,77,22,"default"],[65,32,77,22],[65,33,77,23,"setItem"],[65,40,77,30],[65,41,77,31],[65,53,77,43],[65,55,77,45,"access_token"],[65,67,77,57],[65,68,77,58],[66,6,78,4],[66,12,78,10,"AsyncStorage"],[66,24,78,22],[66,25,78,22,"default"],[66,32,78,22],[66,33,78,23,"setItem"],[66,40,78,30],[66,41,78,31],[66,52,78,42],[66,54,78,44,"JSON"],[66,58,78,48],[66,59,78,49,"stringify"],[66,68,78,58],[66,69,78,59,"userData"],[66,77,78,67],[66,78,78,68],[66,79,78,69],[67,6,80,4,"api"],[67,18,80,7],[67,19,80,7,"api"],[67,22,80,7],[67,23,80,8,"setToken"],[67,31,80,16],[67,32,80,17,"access_token"],[67,44,80,29],[67,45,80,30],[68,6,81,4,"setToken"],[68,14,81,12],[68,15,81,13,"access_token"],[68,27,81,25],[68,28,81,26],[69,6,82,4,"setUser"],[69,13,82,11],[69,14,82,12,"userData"],[69,22,82,20],[69,23,82,21],[70,4,83,2],[70,5,83,3],[71,4,85,2],[71,10,85,8,"register"],[71,18,85,16],[71,21,85,19],[71,27,85,19,"register"],[71,28,85,26,"name"],[71,32,85,38],[71,34,85,40,"email"],[71,39,85,53],[71,41,85,55,"password"],[71,49,85,71],[71,54,85,76],[72,6,86,4],[72,12,86,10,"response"],[72,20,86,18],[72,23,86,21],[72,29,86,27,"api"],[72,41,86,30],[72,42,86,30,"api"],[72,45,86,30],[72,46,86,31,"register"],[72,54,86,39],[72,55,86,40,"name"],[72,59,86,44],[72,61,86,46,"email"],[72,66,86,51],[72,68,86,53,"password"],[72,76,86,61],[72,77,86,62],[73,6,87,4],[73,12,87,10],[74,8,87,12,"access_token"],[74,20,87,24],[75,8,87,26,"user"],[75,12,87,30],[75,14,87,32,"userData"],[76,6,87,41],[76,7,87,42],[76,10,87,45,"response"],[76,18,87,53],[77,6,89,4],[77,12,89,10,"AsyncStorage"],[77,24,89,22],[77,25,89,22,"default"],[77,32,89,22],[77,33,89,23,"setItem"],[77,40,89,30],[77,41,89,31],[77,53,89,43],[77,55,89,45,"access_token"],[77,67,89,57],[77,68,89,58],[78,6,90,4],[78,12,90,10,"AsyncStorage"],[78,24,90,22],[78,25,90,22,"default"],[78,32,90,22],[78,33,90,23,"setItem"],[78,40,90,30],[78,41,90,31],[78,52,90,42],[78,54,90,44,"JSON"],[78,58,90,48],[78,59,90,49,"stringify"],[78,68,90,58],[78,69,90,59,"userData"],[78,77,90,67],[78,78,90,68],[78,79,90,69],[79,6,92,4,"api"],[79,18,92,7],[79,19,92,7,"api"],[79,22,92,7],[79,23,92,8,"setToken"],[79,31,92,16],[79,32,92,17,"access_token"],[79,44,92,29],[79,45,92,30],[80,6,93,4,"setToken"],[80,14,93,12],[80,15,93,13,"access_token"],[80,27,93,25],[80,28,93,26],[81,6,94,4,"setUser"],[81,13,94,11],[81,14,94,12,"userData"],[81,22,94,20],[81,23,94,21],[82,4,95,2],[82,5,95,3],[83,4,97,2],[83,10,97,8,"logout"],[83,16,97,14],[83,19,97,17],[83,25,97,17,"logout"],[83,26,97,17],[83,31,97,29],[84,6,98,4],[84,12,98,10,"AsyncStorage"],[84,24,98,22],[84,25,98,22,"default"],[84,32,98,22],[84,33,98,23,"removeItem"],[84,43,98,33],[84,44,98,34],[84,56,98,46],[84,57,98,47],[85,6,99,4],[85,12,99,10,"AsyncStorage"],[85,24,99,22],[85,25,99,22,"default"],[85,32,99,22],[85,33,99,23,"removeItem"],[85,43,99,33],[85,44,99,34],[85,55,99,45],[85,56,99,46],[86,6,100,4,"api"],[86,18,100,7],[86,19,100,7,"api"],[86,22,100,7],[86,23,100,8,"setToken"],[86,31,100,16],[86,32,100,17],[86,36,100,21],[86,37,100,22],[87,6,101,4,"setToken"],[87,14,101,12],[87,15,101,13],[87,19,101,17],[87,20,101,18],[88,6,102,4,"setUser"],[88,13,102,11],[88,14,102,12],[88,18,102,16],[88,19,102,17],[89,4,103,2],[89,5,103,3],[90,4,105,2],[90,10,105,8,"refreshUser"],[90,21,105,19],[90,24,105,22],[90,30,105,22,"refreshUser"],[90,31,105,22],[90,36,105,34],[91,6,106,4],[91,10,106,8,"token"],[91,15,106,13],[91,17,106,15],[92,8,107,6],[92,12,107,10],[93,10,108,8],[93,16,108,14,"response"],[93,24,108,22],[93,27,108,25],[93,33,108,31,"api"],[93,45,108,34],[93,46,108,34,"api"],[93,49,108,34],[93,50,108,35,"getMe"],[93,55,108,40],[93,56,108,41],[93,57,108,42],[94,10,109,8,"setUser"],[94,17,109,15],[94,18,109,16,"response"],[94,26,109,24],[94,27,109,25],[95,10,110,8],[95,16,110,14,"AsyncStorage"],[95,28,110,26],[95,29,110,26,"default"],[95,36,110,26],[95,37,110,27,"setItem"],[95,44,110,34],[95,45,110,35],[95,56,110,46],[95,58,110,48,"JSON"],[95,62,110,52],[95,63,110,53,"stringify"],[95,72,110,62],[95,73,110,63,"response"],[95,81,110,71],[95,82,110,72],[95,83,110,73],[96,8,111,6],[96,9,111,7],[96,10,111,8],[96,17,111,15,"error"],[96,22,111,20],[96,24,111,22],[97,10,112,8,"console"],[97,17,112,15],[97,18,112,16,"error"],[97,23,112,21],[97,24,112,22],[97,48,112,46],[97,50,112,48,"error"],[97,55,112,53],[97,56,112,54],[98,8,113,6],[99,6,114,4],[100,4,115,2],[100,5,115,3],[101,4,117,2],[101,24,118,4],[101,28,118,4,"_reactJsxDevRuntime"],[101,47,118,4],[101,48,118,4,"jsxDEV"],[101,54,118,4],[101,56,118,5,"AuthContext"],[101,67,118,16],[101,68,118,17,"Provider"],[101,76,118,25],[102,6,118,26,"value"],[102,11,118,31],[102,13,118,33],[103,8,118,35,"user"],[103,12,118,39],[104,8,118,41,"token"],[104,13,118,46],[105,8,118,48,"isLoading"],[105,17,118,57],[106,8,118,59,"isAdmin"],[106,15,118,66],[107,8,118,68,"login"],[107,13,118,73],[108,8,118,75,"register"],[108,16,118,83],[109,8,118,85,"logout"],[109,14,118,91],[110,8,118,93,"refreshUser"],[111,6,118,105],[111,7,118,107],[112,6,118,107,"children"],[112,14,118,107],[112,16,119,7,"children"],[113,4,119,15],[114,6,119,15,"fileName"],[114,14,119,15],[114,16,119,15,"_jsxFileName"],[114,28,119,15],[115,6,119,15,"lineNumber"],[115,16,119,15],[116,6,119,15,"columnNumber"],[116,18,119,15],[117,4,119,15],[117,11,120,26],[117,12,120,27],[118,2,122,0],[119,2,122,1,"_s"],[119,4,122,1],[119,5,35,16,"AuthProvider"],[119,17,35,28],[120,2,35,28,"_c"],[120,4,35,28],[120,7,35,16,"AuthProvider"],[120,19,35,28],[121,2,124,7],[121,11,124,16,"useAuth"],[121,18,124,23,"useAuth"],[121,19,124,23],[121,21,124,26],[122,4,124,26,"_s2"],[122,7,124,26],[123,4,125,2],[123,10,125,8,"context"],[123,17,125,15],[123,20,125,18],[123,24,125,18,"useContext"],[123,30,125,28],[123,31,125,28,"useContext"],[123,41,125,28],[123,43,125,29,"AuthContext"],[123,54,125,40],[123,55,125,41],[124,4,126,2],[124,8,126,6,"context"],[124,15,126,13],[124,20,126,18,"undefined"],[124,29,126,27],[124,31,126,29],[125,6,127,4],[125,12,127,10],[125,16,127,14,"Error"],[125,21,127,19],[125,22,127,20],[125,67,127,65],[125,68,127,66],[126,4,128,2],[127,4,129,2],[127,11,129,9,"context"],[127,18,129,16],[128,2,130,0],[129,2,130,1,"_s2"],[129,5,130,1],[129,6,124,16,"useAuth"],[129,13,124,23],[130,2,124,23],[130,6,124,23,"_c"],[130,8,124,23],[131,2,124,23,"$RefreshReg$"],[131,14,124,23],[131,15,124,23,"_c"],[131,17,124,23],[132,0,124,23],[132,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;OCkC;YCO;GDE;yBEE;GFyB;gBGE;GHU;mBIE;GJU;iBKE;GLM;sBME;GNU;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}