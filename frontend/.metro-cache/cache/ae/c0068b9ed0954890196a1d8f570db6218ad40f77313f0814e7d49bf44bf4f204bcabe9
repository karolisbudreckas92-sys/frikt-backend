{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.api.setToken(storedToken);\n\n          // Verify token is still valid\n          try {\n            const response = await _servicesApi.api.getMe();\n            setUser(response);\n            await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n          } catch (error) {\n            // Token invalid, clear auth\n            await logout();\n          }\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _servicesApi.api.login(email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (name, email, password) => {\n      const response = await _servicesApi.api.register(name, email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n      _servicesApi.api.setToken(null);\n      setToken(null);\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        try {\n          const response = await _servicesApi.api.getMe();\n          setUser(response);\n          await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n        } catch (error) {\n          console.error('Error refreshing user:', error);\n        }\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":121,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,114,0,"exports"],[14,9,114,0],[14,10,114,0,"useAuth"],[14,17,114,0],[14,20,114,0,"useAuth"],[14,27,114,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesApi"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,3,38],[19,6,3,38,"_reactJsxDevRuntime"],[19,25,3,38],[19,28,3,38,"require"],[19,35,3,38],[19,36,3,38,"_dependencyMap"],[19,50,3,38],[20,2,25,0],[20,8,25,6,"AuthContext"],[20,19,25,17],[20,35,25,20],[20,39,25,20,"createContext"],[20,45,25,33],[20,46,25,33,"createContext"],[20,59,25,33],[20,61,25,63,"undefined"],[20,70,25,72],[20,71,25,73],[21,2,27,7],[21,11,27,16,"AuthProvider"],[21,23,27,28,"AuthProvider"],[21,24,27,29],[22,4,27,31,"children"],[23,2,27,65],[23,3,27,66],[23,5,27,68],[24,4,28,2],[24,10,28,8],[24,11,28,9,"user"],[24,15,28,13],[24,17,28,15,"setUser"],[24,24,28,22],[24,25,28,23],[24,28,28,26],[24,32,28,26,"useState"],[24,38,28,34],[24,39,28,34,"useState"],[24,47,28,34],[24,49,28,48],[24,53,28,52],[24,54,28,53],[25,4,29,2],[25,10,29,8],[25,11,29,9,"token"],[25,16,29,14],[25,18,29,16,"setToken"],[25,26,29,24],[25,27,29,25],[25,30,29,28],[25,34,29,28,"useState"],[25,40,29,36],[25,41,29,36,"useState"],[25,49,29,36],[25,51,29,52],[25,55,29,56],[25,56,29,57],[26,4,30,2],[26,10,30,8],[26,11,30,9,"isLoading"],[26,20,30,18],[26,22,30,20,"setIsLoading"],[26,34,30,32],[26,35,30,33],[26,38,30,36],[26,42,30,36,"useState"],[26,48,30,44],[26,49,30,44,"useState"],[26,57,30,44],[26,59,30,45],[26,63,30,49],[26,64,30,50],[27,4,32,2],[27,8,32,2,"useEffect"],[27,14,32,11],[27,15,32,11,"useEffect"],[27,24,32,11],[27,26,32,12],[27,32,32,18],[28,6,33,4,"loadStoredAuth"],[28,20,33,18],[28,21,33,19],[28,22,33,20],[29,4,34,2],[29,5,34,3],[29,7,34,5],[29,9,34,7],[29,10,34,8],[30,4,36,2],[30,10,36,8,"loadStoredAuth"],[30,24,36,22],[30,27,36,25],[30,33,36,25,"loadStoredAuth"],[30,34,36,25],[30,39,36,37],[31,6,37,4],[31,10,37,8],[32,8,38,6],[32,14,38,12,"storedToken"],[32,25,38,23],[32,28,38,26],[32,34,38,32,"AsyncStorage"],[32,46,38,44],[32,47,38,44,"default"],[32,54,38,44],[32,55,38,45,"getItem"],[32,62,38,52],[32,63,38,53],[32,75,38,65],[32,76,38,66],[33,8,39,6],[33,14,39,12,"storedUser"],[33,24,39,22],[33,27,39,25],[33,33,39,31,"AsyncStorage"],[33,45,39,43],[33,46,39,43,"default"],[33,53,39,43],[33,54,39,44,"getItem"],[33,61,39,51],[33,62,39,52],[33,73,39,63],[33,74,39,64],[34,8,41,6],[34,12,41,10,"storedToken"],[34,23,41,21],[34,27,41,25,"storedUser"],[34,37,41,35],[34,39,41,37],[35,10,42,8,"setToken"],[35,18,42,16],[35,19,42,17,"storedToken"],[35,30,42,28],[35,31,42,29],[36,10,43,8,"setUser"],[36,17,43,15],[36,18,43,16,"JSON"],[36,22,43,20],[36,23,43,21,"parse"],[36,28,43,26],[36,29,43,27,"storedUser"],[36,39,43,37],[36,40,43,38],[36,41,43,39],[37,10,44,8,"api"],[37,22,44,11],[37,23,44,11,"api"],[37,26,44,11],[37,27,44,12,"setToken"],[37,35,44,20],[37,36,44,21,"storedToken"],[37,47,44,32],[37,48,44,33],[39,10,46,8],[40,10,47,8],[40,14,47,12],[41,12,48,10],[41,18,48,16,"response"],[41,26,48,24],[41,29,48,27],[41,35,48,33,"api"],[41,47,48,36],[41,48,48,36,"api"],[41,51,48,36],[41,52,48,37,"getMe"],[41,57,48,42],[41,58,48,43],[41,59,48,44],[42,12,49,10,"setUser"],[42,19,49,17],[42,20,49,18,"response"],[42,28,49,26],[42,29,49,27],[43,12,50,10],[43,18,50,16,"AsyncStorage"],[43,30,50,28],[43,31,50,28,"default"],[43,38,50,28],[43,39,50,29,"setItem"],[43,46,50,36],[43,47,50,37],[43,58,50,48],[43,60,50,50,"JSON"],[43,64,50,54],[43,65,50,55,"stringify"],[43,74,50,64],[43,75,50,65,"response"],[43,83,50,73],[43,84,50,74],[43,85,50,75],[44,10,51,8],[44,11,51,9],[44,12,51,10],[44,19,51,17,"error"],[44,24,51,22],[44,26,51,24],[45,12,52,10],[46,12,53,10],[46,18,53,16,"logout"],[46,24,53,22],[46,25,53,23],[46,26,53,24],[47,10,54,8],[48,8,55,6],[49,6,56,4],[49,7,56,5],[49,8,56,6],[49,15,56,13,"error"],[49,20,56,18],[49,22,56,20],[50,8,57,6,"console"],[50,15,57,13],[50,16,57,14,"error"],[50,21,57,19],[50,22,57,20],[50,43,57,41],[50,45,57,43,"error"],[50,50,57,48],[50,51,57,49],[51,6,58,4],[51,7,58,5],[51,16,58,14],[52,8,59,6,"setIsLoading"],[52,20,59,18],[52,21,59,19],[52,26,59,24],[52,27,59,25],[53,6,60,4],[54,4,61,2],[54,5,61,3],[55,4,63,2],[55,10,63,8,"login"],[55,15,63,13],[55,18,63,16],[55,24,63,16,"login"],[55,25,63,23,"email"],[55,30,63,36],[55,32,63,38,"password"],[55,40,63,54],[55,45,63,59],[56,6,64,4],[56,12,64,10,"response"],[56,20,64,18],[56,23,64,21],[56,29,64,27,"api"],[56,41,64,30],[56,42,64,30,"api"],[56,45,64,30],[56,46,64,31,"login"],[56,51,64,36],[56,52,64,37,"email"],[56,57,64,42],[56,59,64,44,"password"],[56,67,64,52],[56,68,64,53],[57,6,65,4],[57,12,65,10],[58,8,65,12,"access_token"],[58,20,65,24],[59,8,65,26,"user"],[59,12,65,30],[59,14,65,32,"userData"],[60,6,65,41],[60,7,65,42],[60,10,65,45,"response"],[60,18,65,53],[61,6,67,4],[61,12,67,10,"AsyncStorage"],[61,24,67,22],[61,25,67,22,"default"],[61,32,67,22],[61,33,67,23,"setItem"],[61,40,67,30],[61,41,67,31],[61,53,67,43],[61,55,67,45,"access_token"],[61,67,67,57],[61,68,67,58],[62,6,68,4],[62,12,68,10,"AsyncStorage"],[62,24,68,22],[62,25,68,22,"default"],[62,32,68,22],[62,33,68,23,"setItem"],[62,40,68,30],[62,41,68,31],[62,52,68,42],[62,54,68,44,"JSON"],[62,58,68,48],[62,59,68,49,"stringify"],[62,68,68,58],[62,69,68,59,"userData"],[62,77,68,67],[62,78,68,68],[62,79,68,69],[63,6,70,4,"api"],[63,18,70,7],[63,19,70,7,"api"],[63,22,70,7],[63,23,70,8,"setToken"],[63,31,70,16],[63,32,70,17,"access_token"],[63,44,70,29],[63,45,70,30],[64,6,71,4,"setToken"],[64,14,71,12],[64,15,71,13,"access_token"],[64,27,71,25],[64,28,71,26],[65,6,72,4,"setUser"],[65,13,72,11],[65,14,72,12,"userData"],[65,22,72,20],[65,23,72,21],[66,4,73,2],[66,5,73,3],[67,4,75,2],[67,10,75,8,"register"],[67,18,75,16],[67,21,75,19],[67,27,75,19,"register"],[67,28,75,26,"name"],[67,32,75,38],[67,34,75,40,"email"],[67,39,75,53],[67,41,75,55,"password"],[67,49,75,71],[67,54,75,76],[68,6,76,4],[68,12,76,10,"response"],[68,20,76,18],[68,23,76,21],[68,29,76,27,"api"],[68,41,76,30],[68,42,76,30,"api"],[68,45,76,30],[68,46,76,31,"register"],[68,54,76,39],[68,55,76,40,"name"],[68,59,76,44],[68,61,76,46,"email"],[68,66,76,51],[68,68,76,53,"password"],[68,76,76,61],[68,77,76,62],[69,6,77,4],[69,12,77,10],[70,8,77,12,"access_token"],[70,20,77,24],[71,8,77,26,"user"],[71,12,77,30],[71,14,77,32,"userData"],[72,6,77,41],[72,7,77,42],[72,10,77,45,"response"],[72,18,77,53],[73,6,79,4],[73,12,79,10,"AsyncStorage"],[73,24,79,22],[73,25,79,22,"default"],[73,32,79,22],[73,33,79,23,"setItem"],[73,40,79,30],[73,41,79,31],[73,53,79,43],[73,55,79,45,"access_token"],[73,67,79,57],[73,68,79,58],[74,6,80,4],[74,12,80,10,"AsyncStorage"],[74,24,80,22],[74,25,80,22,"default"],[74,32,80,22],[74,33,80,23,"setItem"],[74,40,80,30],[74,41,80,31],[74,52,80,42],[74,54,80,44,"JSON"],[74,58,80,48],[74,59,80,49,"stringify"],[74,68,80,58],[74,69,80,59,"userData"],[74,77,80,67],[74,78,80,68],[74,79,80,69],[75,6,82,4,"api"],[75,18,82,7],[75,19,82,7,"api"],[75,22,82,7],[75,23,82,8,"setToken"],[75,31,82,16],[75,32,82,17,"access_token"],[75,44,82,29],[75,45,82,30],[76,6,83,4,"setToken"],[76,14,83,12],[76,15,83,13,"access_token"],[76,27,83,25],[76,28,83,26],[77,6,84,4,"setUser"],[77,13,84,11],[77,14,84,12,"userData"],[77,22,84,20],[77,23,84,21],[78,4,85,2],[78,5,85,3],[79,4,87,2],[79,10,87,8,"logout"],[79,16,87,14],[79,19,87,17],[79,25,87,17,"logout"],[79,26,87,17],[79,31,87,29],[80,6,88,4],[80,12,88,10,"AsyncStorage"],[80,24,88,22],[80,25,88,22,"default"],[80,32,88,22],[80,33,88,23,"removeItem"],[80,43,88,33],[80,44,88,34],[80,56,88,46],[80,57,88,47],[81,6,89,4],[81,12,89,10,"AsyncStorage"],[81,24,89,22],[81,25,89,22,"default"],[81,32,89,22],[81,33,89,23,"removeItem"],[81,43,89,33],[81,44,89,34],[81,55,89,45],[81,56,89,46],[82,6,90,4,"api"],[82,18,90,7],[82,19,90,7,"api"],[82,22,90,7],[82,23,90,8,"setToken"],[82,31,90,16],[82,32,90,17],[82,36,90,21],[82,37,90,22],[83,6,91,4,"setToken"],[83,14,91,12],[83,15,91,13],[83,19,91,17],[83,20,91,18],[84,6,92,4,"setUser"],[84,13,92,11],[84,14,92,12],[84,18,92,16],[84,19,92,17],[85,4,93,2],[85,5,93,3],[86,4,95,2],[86,10,95,8,"refreshUser"],[86,21,95,19],[86,24,95,22],[86,30,95,22,"refreshUser"],[86,31,95,22],[86,36,95,34],[87,6,96,4],[87,10,96,8,"token"],[87,15,96,13],[87,17,96,15],[88,8,97,6],[88,12,97,10],[89,10,98,8],[89,16,98,14,"response"],[89,24,98,22],[89,27,98,25],[89,33,98,31,"api"],[89,45,98,34],[89,46,98,34,"api"],[89,49,98,34],[89,50,98,35,"getMe"],[89,55,98,40],[89,56,98,41],[89,57,98,42],[90,10,99,8,"setUser"],[90,17,99,15],[90,18,99,16,"response"],[90,26,99,24],[90,27,99,25],[91,10,100,8],[91,16,100,14,"AsyncStorage"],[91,28,100,26],[91,29,100,26,"default"],[91,36,100,26],[91,37,100,27,"setItem"],[91,44,100,34],[91,45,100,35],[91,56,100,46],[91,58,100,48,"JSON"],[91,62,100,52],[91,63,100,53,"stringify"],[91,72,100,62],[91,73,100,63,"response"],[91,81,100,71],[91,82,100,72],[91,83,100,73],[92,8,101,6],[92,9,101,7],[92,10,101,8],[92,17,101,15,"error"],[92,22,101,20],[92,24,101,22],[93,10,102,8,"console"],[93,17,102,15],[93,18,102,16,"error"],[93,23,102,21],[93,24,102,22],[93,48,102,46],[93,50,102,48,"error"],[93,55,102,53],[93,56,102,54],[94,8,103,6],[95,6,104,4],[96,4,105,2],[96,5,105,3],[97,4,107,2],[97,24,108,4],[97,28,108,4,"_reactJsxDevRuntime"],[97,47,108,4],[97,48,108,4,"jsxDEV"],[97,54,108,4],[97,56,108,5,"AuthContext"],[97,67,108,16],[97,68,108,17,"Provider"],[97,76,108,25],[98,6,108,26,"value"],[98,11,108,31],[98,13,108,33],[99,8,108,35,"user"],[99,12,108,39],[100,8,108,41,"token"],[100,13,108,46],[101,8,108,48,"isLoading"],[101,17,108,57],[102,8,108,59,"login"],[102,13,108,64],[103,8,108,66,"register"],[103,16,108,74],[104,8,108,76,"logout"],[104,14,108,82],[105,8,108,84,"refreshUser"],[106,6,108,96],[106,7,108,98],[107,6,108,98,"children"],[107,14,108,98],[107,16,109,7,"children"],[108,4,109,15],[109,6,109,15,"fileName"],[109,14,109,15],[109,16,109,15,"_jsxFileName"],[109,28,109,15],[110,6,109,15,"lineNumber"],[110,16,109,15],[111,6,109,15,"columnNumber"],[111,18,109,15],[112,4,109,15],[112,11,110,26],[112,12,110,27],[113,2,112,0],[114,2,114,7],[114,11,114,16,"useAuth"],[114,18,114,23,"useAuth"],[114,19,114,23],[114,21,114,26],[115,4,115,2],[115,10,115,8,"context"],[115,17,115,15],[115,20,115,18],[115,24,115,18,"useContext"],[115,30,115,28],[115,31,115,28,"useContext"],[115,41,115,28],[115,43,115,29,"AuthContext"],[115,54,115,40],[115,55,115,41],[116,4,116,2],[116,8,116,6,"context"],[116,15,116,13],[116,20,116,18,"undefined"],[116,29,116,27],[116,31,116,29],[117,6,117,4],[117,12,117,10],[117,16,117,14,"Error"],[117,21,117,19],[117,22,117,20],[117,67,117,65],[117,68,117,66],[118,4,118,2],[119,4,119,2],[119,11,119,9,"context"],[119,18,119,16],[120,2,120,0],[121,0,120,1],[121,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFyB;gBGE;GHU;mBIE;GJU;iBKE;GLM;sBME;GNU;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}