{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":38,"index":198}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const isAdmin = user?.role === 'admin';\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.api.setToken(storedToken);\n\n          // Verify token is still valid\n          try {\n            const response = await _servicesApi.api.getMe();\n            setUser(response);\n            await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n          } catch (error) {\n            // Token invalid, clear auth\n            await logout();\n          }\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _servicesApi.api.login(email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const register = async (name, email, password) => {\n      const response = await _servicesApi.api.register(name, email, password);\n      const {\n        access_token,\n        user: userData\n      } = response;\n      await AsyncStorage.default.setItem('auth_token', access_token);\n      await AsyncStorage.default.setItem('auth_user', JSON.stringify(userData));\n      _servicesApi.api.setToken(access_token);\n      setToken(access_token);\n      setUser(userData);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n      _servicesApi.api.setToken(null);\n      setToken(null);\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      if (token) {\n        try {\n          const response = await _servicesApi.api.getMe();\n          setUser(response);\n          await AsyncStorage.default.setItem('auth_user', JSON.stringify(response));\n        } catch (error) {\n          console.error('Error refreshing user:', error);\n        }\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        isAdmin,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":132,"map":[[15,2,30,0,"exports"],[15,9,30,0],[15,10,30,0,"AuthProvider"],[15,22,30,0],[15,25,30,0,"AuthProvider"],[15,37,30,0],[16,2,119,0,"exports"],[16,9,119,0],[16,10,119,0,"useAuth"],[16,17,119,0],[16,20,119,0,"useAuth"],[16,27,119,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,28,0],[22,8,28,6,"AuthContext"],[22,19,28,17],[22,35,28,20],[22,39,28,20,"createContext"],[22,45,28,33],[22,46,28,33,"createContext"],[22,59,28,33],[22,61,28,63,"undefined"],[22,70,28,72],[22,71,28,73],[23,2,30,7],[23,11,30,16,"AuthProvider"],[23,23,30,28,"AuthProvider"],[23,24,30,29],[24,4,30,31,"children"],[25,2,30,65],[25,3,30,66],[25,5,30,68],[26,4,30,68,"_s"],[26,6,30,68],[27,4,31,2],[27,10,31,8],[27,11,31,9,"user"],[27,15,31,13],[27,17,31,15,"setUser"],[27,24,31,22],[27,25,31,23],[27,28,31,26],[27,32,31,26,"useState"],[27,38,31,34],[27,39,31,34,"useState"],[27,47,31,34],[27,49,31,48],[27,53,31,52],[27,54,31,53],[28,4,32,2],[28,10,32,8],[28,11,32,9,"token"],[28,16,32,14],[28,18,32,16,"setToken"],[28,26,32,24],[28,27,32,25],[28,30,32,28],[28,34,32,28,"useState"],[28,40,32,36],[28,41,32,36,"useState"],[28,49,32,36],[28,51,32,52],[28,55,32,56],[28,56,32,57],[29,4,33,2],[29,10,33,8],[29,11,33,9,"isLoading"],[29,20,33,18],[29,22,33,20,"setIsLoading"],[29,34,33,32],[29,35,33,33],[29,38,33,36],[29,42,33,36,"useState"],[29,48,33,44],[29,49,33,44,"useState"],[29,57,33,44],[29,59,33,45],[29,63,33,49],[29,64,33,50],[30,4,35,2],[30,10,35,8,"isAdmin"],[30,17,35,15],[30,20,35,18,"user"],[30,24,35,22],[30,26,35,24,"role"],[30,30,35,28],[30,35,35,33],[30,42,35,40],[31,4,37,2],[31,8,37,2,"useEffect"],[31,14,37,11],[31,15,37,11,"useEffect"],[31,24,37,11],[31,26,37,12],[31,32,37,18],[32,6,38,4,"loadStoredAuth"],[32,20,38,18],[32,21,38,19],[32,22,38,20],[33,4,39,2],[33,5,39,3],[33,7,39,5],[33,9,39,7],[33,10,39,8],[34,4,41,2],[34,10,41,8,"loadStoredAuth"],[34,24,41,22],[34,27,41,25],[34,33,41,25,"loadStoredAuth"],[34,34,41,25],[34,39,41,37],[35,6,42,4],[35,10,42,8],[36,8,43,6],[36,14,43,12,"storedToken"],[36,25,43,23],[36,28,43,26],[36,34,43,32,"AsyncStorage"],[36,46,43,44],[36,47,43,44,"default"],[36,54,43,44],[36,55,43,45,"getItem"],[36,62,43,52],[36,63,43,53],[36,75,43,65],[36,76,43,66],[37,8,44,6],[37,14,44,12,"storedUser"],[37,24,44,22],[37,27,44,25],[37,33,44,31,"AsyncStorage"],[37,45,44,43],[37,46,44,43,"default"],[37,53,44,43],[37,54,44,44,"getItem"],[37,61,44,51],[37,62,44,52],[37,73,44,63],[37,74,44,64],[38,8,46,6],[38,12,46,10,"storedToken"],[38,23,46,21],[38,27,46,25,"storedUser"],[38,37,46,35],[38,39,46,37],[39,10,47,8,"setToken"],[39,18,47,16],[39,19,47,17,"storedToken"],[39,30,47,28],[39,31,47,29],[40,10,48,8,"setUser"],[40,17,48,15],[40,18,48,16,"JSON"],[40,22,48,20],[40,23,48,21,"parse"],[40,28,48,26],[40,29,48,27,"storedUser"],[40,39,48,37],[40,40,48,38],[40,41,48,39],[41,10,49,8,"api"],[41,22,49,11],[41,23,49,11,"api"],[41,26,49,11],[41,27,49,12,"setToken"],[41,35,49,20],[41,36,49,21,"storedToken"],[41,47,49,32],[41,48,49,33],[43,10,51,8],[44,10,52,8],[44,14,52,12],[45,12,53,10],[45,18,53,16,"response"],[45,26,53,24],[45,29,53,27],[45,35,53,33,"api"],[45,47,53,36],[45,48,53,36,"api"],[45,51,53,36],[45,52,53,37,"getMe"],[45,57,53,42],[45,58,53,43],[45,59,53,44],[46,12,54,10,"setUser"],[46,19,54,17],[46,20,54,18,"response"],[46,28,54,26],[46,29,54,27],[47,12,55,10],[47,18,55,16,"AsyncStorage"],[47,30,55,28],[47,31,55,28,"default"],[47,38,55,28],[47,39,55,29,"setItem"],[47,46,55,36],[47,47,55,37],[47,58,55,48],[47,60,55,50,"JSON"],[47,64,55,54],[47,65,55,55,"stringify"],[47,74,55,64],[47,75,55,65,"response"],[47,83,55,73],[47,84,55,74],[47,85,55,75],[48,10,56,8],[48,11,56,9],[48,12,56,10],[48,19,56,17,"error"],[48,24,56,22],[48,26,56,24],[49,12,57,10],[50,12,58,10],[50,18,58,16,"logout"],[50,24,58,22],[50,25,58,23],[50,26,58,24],[51,10,59,8],[52,8,60,6],[53,6,61,4],[53,7,61,5],[53,8,61,6],[53,15,61,13,"error"],[53,20,61,18],[53,22,61,20],[54,8,62,6,"console"],[54,15,62,13],[54,16,62,14,"error"],[54,21,62,19],[54,22,62,20],[54,43,62,41],[54,45,62,43,"error"],[54,50,62,48],[54,51,62,49],[55,6,63,4],[55,7,63,5],[55,16,63,14],[56,8,64,6,"setIsLoading"],[56,20,64,18],[56,21,64,19],[56,26,64,24],[56,27,64,25],[57,6,65,4],[58,4,66,2],[58,5,66,3],[59,4,68,2],[59,10,68,8,"login"],[59,15,68,13],[59,18,68,16],[59,24,68,16,"login"],[59,25,68,23,"email"],[59,30,68,36],[59,32,68,38,"password"],[59,40,68,54],[59,45,68,59],[60,6,69,4],[60,12,69,10,"response"],[60,20,69,18],[60,23,69,21],[60,29,69,27,"api"],[60,41,69,30],[60,42,69,30,"api"],[60,45,69,30],[60,46,69,31,"login"],[60,51,69,36],[60,52,69,37,"email"],[60,57,69,42],[60,59,69,44,"password"],[60,67,69,52],[60,68,69,53],[61,6,70,4],[61,12,70,10],[62,8,70,12,"access_token"],[62,20,70,24],[63,8,70,26,"user"],[63,12,70,30],[63,14,70,32,"userData"],[64,6,70,41],[64,7,70,42],[64,10,70,45,"response"],[64,18,70,53],[65,6,72,4],[65,12,72,10,"AsyncStorage"],[65,24,72,22],[65,25,72,22,"default"],[65,32,72,22],[65,33,72,23,"setItem"],[65,40,72,30],[65,41,72,31],[65,53,72,43],[65,55,72,45,"access_token"],[65,67,72,57],[65,68,72,58],[66,6,73,4],[66,12,73,10,"AsyncStorage"],[66,24,73,22],[66,25,73,22,"default"],[66,32,73,22],[66,33,73,23,"setItem"],[66,40,73,30],[66,41,73,31],[66,52,73,42],[66,54,73,44,"JSON"],[66,58,73,48],[66,59,73,49,"stringify"],[66,68,73,58],[66,69,73,59,"userData"],[66,77,73,67],[66,78,73,68],[66,79,73,69],[67,6,75,4,"api"],[67,18,75,7],[67,19,75,7,"api"],[67,22,75,7],[67,23,75,8,"setToken"],[67,31,75,16],[67,32,75,17,"access_token"],[67,44,75,29],[67,45,75,30],[68,6,76,4,"setToken"],[68,14,76,12],[68,15,76,13,"access_token"],[68,27,76,25],[68,28,76,26],[69,6,77,4,"setUser"],[69,13,77,11],[69,14,77,12,"userData"],[69,22,77,20],[69,23,77,21],[70,4,78,2],[70,5,78,3],[71,4,80,2],[71,10,80,8,"register"],[71,18,80,16],[71,21,80,19],[71,27,80,19,"register"],[71,28,80,26,"name"],[71,32,80,38],[71,34,80,40,"email"],[71,39,80,53],[71,41,80,55,"password"],[71,49,80,71],[71,54,80,76],[72,6,81,4],[72,12,81,10,"response"],[72,20,81,18],[72,23,81,21],[72,29,81,27,"api"],[72,41,81,30],[72,42,81,30,"api"],[72,45,81,30],[72,46,81,31,"register"],[72,54,81,39],[72,55,81,40,"name"],[72,59,81,44],[72,61,81,46,"email"],[72,66,81,51],[72,68,81,53,"password"],[72,76,81,61],[72,77,81,62],[73,6,82,4],[73,12,82,10],[74,8,82,12,"access_token"],[74,20,82,24],[75,8,82,26,"user"],[75,12,82,30],[75,14,82,32,"userData"],[76,6,82,41],[76,7,82,42],[76,10,82,45,"response"],[76,18,82,53],[77,6,84,4],[77,12,84,10,"AsyncStorage"],[77,24,84,22],[77,25,84,22,"default"],[77,32,84,22],[77,33,84,23,"setItem"],[77,40,84,30],[77,41,84,31],[77,53,84,43],[77,55,84,45,"access_token"],[77,67,84,57],[77,68,84,58],[78,6,85,4],[78,12,85,10,"AsyncStorage"],[78,24,85,22],[78,25,85,22,"default"],[78,32,85,22],[78,33,85,23,"setItem"],[78,40,85,30],[78,41,85,31],[78,52,85,42],[78,54,85,44,"JSON"],[78,58,85,48],[78,59,85,49,"stringify"],[78,68,85,58],[78,69,85,59,"userData"],[78,77,85,67],[78,78,85,68],[78,79,85,69],[79,6,87,4,"api"],[79,18,87,7],[79,19,87,7,"api"],[79,22,87,7],[79,23,87,8,"setToken"],[79,31,87,16],[79,32,87,17,"access_token"],[79,44,87,29],[79,45,87,30],[80,6,88,4,"setToken"],[80,14,88,12],[80,15,88,13,"access_token"],[80,27,88,25],[80,28,88,26],[81,6,89,4,"setUser"],[81,13,89,11],[81,14,89,12,"userData"],[81,22,89,20],[81,23,89,21],[82,4,90,2],[82,5,90,3],[83,4,92,2],[83,10,92,8,"logout"],[83,16,92,14],[83,19,92,17],[83,25,92,17,"logout"],[83,26,92,17],[83,31,92,29],[84,6,93,4],[84,12,93,10,"AsyncStorage"],[84,24,93,22],[84,25,93,22,"default"],[84,32,93,22],[84,33,93,23,"removeItem"],[84,43,93,33],[84,44,93,34],[84,56,93,46],[84,57,93,47],[85,6,94,4],[85,12,94,10,"AsyncStorage"],[85,24,94,22],[85,25,94,22,"default"],[85,32,94,22],[85,33,94,23,"removeItem"],[85,43,94,33],[85,44,94,34],[85,55,94,45],[85,56,94,46],[86,6,95,4,"api"],[86,18,95,7],[86,19,95,7,"api"],[86,22,95,7],[86,23,95,8,"setToken"],[86,31,95,16],[86,32,95,17],[86,36,95,21],[86,37,95,22],[87,6,96,4,"setToken"],[87,14,96,12],[87,15,96,13],[87,19,96,17],[87,20,96,18],[88,6,97,4,"setUser"],[88,13,97,11],[88,14,97,12],[88,18,97,16],[88,19,97,17],[89,4,98,2],[89,5,98,3],[90,4,100,2],[90,10,100,8,"refreshUser"],[90,21,100,19],[90,24,100,22],[90,30,100,22,"refreshUser"],[90,31,100,22],[90,36,100,34],[91,6,101,4],[91,10,101,8,"token"],[91,15,101,13],[91,17,101,15],[92,8,102,6],[92,12,102,10],[93,10,103,8],[93,16,103,14,"response"],[93,24,103,22],[93,27,103,25],[93,33,103,31,"api"],[93,45,103,34],[93,46,103,34,"api"],[93,49,103,34],[93,50,103,35,"getMe"],[93,55,103,40],[93,56,103,41],[93,57,103,42],[94,10,104,8,"setUser"],[94,17,104,15],[94,18,104,16,"response"],[94,26,104,24],[94,27,104,25],[95,10,105,8],[95,16,105,14,"AsyncStorage"],[95,28,105,26],[95,29,105,26,"default"],[95,36,105,26],[95,37,105,27,"setItem"],[95,44,105,34],[95,45,105,35],[95,56,105,46],[95,58,105,48,"JSON"],[95,62,105,52],[95,63,105,53,"stringify"],[95,72,105,62],[95,73,105,63,"response"],[95,81,105,71],[95,82,105,72],[95,83,105,73],[96,8,106,6],[96,9,106,7],[96,10,106,8],[96,17,106,15,"error"],[96,22,106,20],[96,24,106,22],[97,10,107,8,"console"],[97,17,107,15],[97,18,107,16,"error"],[97,23,107,21],[97,24,107,22],[97,48,107,46],[97,50,107,48,"error"],[97,55,107,53],[97,56,107,54],[98,8,108,6],[99,6,109,4],[100,4,110,2],[100,5,110,3],[101,4,112,2],[101,24,113,4],[101,28,113,4,"_reactJsxDevRuntime"],[101,47,113,4],[101,48,113,4,"jsxDEV"],[101,54,113,4],[101,56,113,5,"AuthContext"],[101,67,113,16],[101,68,113,17,"Provider"],[101,76,113,25],[102,6,113,26,"value"],[102,11,113,31],[102,13,113,33],[103,8,113,35,"user"],[103,12,113,39],[104,8,113,41,"token"],[104,13,113,46],[105,8,113,48,"isLoading"],[105,17,113,57],[106,8,113,59,"isAdmin"],[106,15,113,66],[107,8,113,68,"login"],[107,13,113,73],[108,8,113,75,"register"],[108,16,113,83],[109,8,113,85,"logout"],[109,14,113,91],[110,8,113,93,"refreshUser"],[111,6,113,105],[111,7,113,107],[112,6,113,107,"children"],[112,14,113,107],[112,16,114,7,"children"],[113,4,114,15],[114,6,114,15,"fileName"],[114,14,114,15],[114,16,114,15,"_jsxFileName"],[114,28,114,15],[115,6,114,15,"lineNumber"],[115,16,114,15],[116,6,114,15,"columnNumber"],[116,18,114,15],[117,4,114,15],[117,11,115,26],[117,12,115,27],[118,2,117,0],[119,2,117,1,"_s"],[119,4,117,1],[119,5,30,16,"AuthProvider"],[119,17,30,28],[120,2,30,28,"_c"],[120,4,30,28],[120,7,30,16,"AuthProvider"],[120,19,30,28],[121,2,119,7],[121,11,119,16,"useAuth"],[121,18,119,23,"useAuth"],[121,19,119,23],[121,21,119,26],[122,4,119,26,"_s2"],[122,7,119,26],[123,4,120,2],[123,10,120,8,"context"],[123,17,120,15],[123,20,120,18],[123,24,120,18,"useContext"],[123,30,120,28],[123,31,120,28,"useContext"],[123,41,120,28],[123,43,120,29,"AuthContext"],[123,54,120,40],[123,55,120,41],[124,4,121,2],[124,8,121,6,"context"],[124,15,121,13],[124,20,121,18,"undefined"],[124,29,121,27],[124,31,121,29],[125,6,122,4],[125,12,122,10],[125,16,122,14,"Error"],[125,21,122,19],[125,22,122,20],[125,67,122,65],[125,68,122,66],[126,4,123,2],[127,4,124,2],[127,11,124,9,"context"],[127,18,124,16],[128,2,125,0],[129,2,125,1,"_s2"],[129,5,125,1],[129,6,119,16,"useAuth"],[129,13,119,23],[130,2,119,23],[130,6,119,23,"_c"],[130,8,119,23],[131,2,119,23,"$RefreshReg$"],[131,14,119,23],[131,15,119,23,"_c"],[131,17,119,23],[132,0,119,23],[132,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;OC6B;YCO;GDE;yBEE;GFyB;gBGE;GHU;mBIE;GJU;iBKE;GLM;sBME;GNU;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}